<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Case study - Yêu cầu 6</title>
</head>
<body>
<script>
    class Customers {
        constructor(name,idNumber,dateOfBirth,email,address,memberCard,discount,follower,stayDay,sevice,roomtype) {
            this.name = name;
            this.idNumber = idNumber;
            this.dateOfBirth = dateOfBirth;
            this.email = email;
            this.address = address;
            this.memberCard = memberCard;
            this.discount = discount;
            this.follower = follower;
            this.stayDay = stayDay;
            this.service = sevice;
            this.roomType = roomtype;
        }
        getName() {
            return this.name;
        }
        setName(name) {
            this.name = name;
        }
        getIdNumber() {
            return this.idNumber;
        }
        setIdNumber(idNumber) {
            this.idNumber = idNumber;
        }
        getDateOfBirth() {
            return this.dateOfBirth;
        }
        setDateOfBirth(dateOfBirth) {
            this.dateOfBirth = dateOfBirth;
        }
        getEmail() {
            return this.email;
        }
        setEmail(email) {
            this.email = email;
        }
        getAddress() {
            return this.address;
        }
        setAddress(address) {
            this.address = address;
        }
        getMemberCard() {
            return this.memberCard;
        }
        setMemberCard(memberCard) {
            this.memberCard = memberCard;
        }
        getDiscount() {
            return this.discount;
        }
        setDiscount(discount) {
            this.discount = discount;
        }
        getFollower() {
            return this.follower;
        }
        setFollower(follower) {
            this.follower = follower;
        }
        getStayDay() {
            return this.stayDay;
        }
        setStayDay(stayDay) {
            this.stayDay = stayDay;
        }
        getService() {
            return this.service;
        }
        setService(service) {
            this.service = service;
        }
        getRoomType() {
            return this.roomType;
        }
        setRoomType(roomType) {
            this.roomType = roomType;
        }
        payMoney() {
            if ( this.service == "villa" || this.service == "Villa" ) {
                let moneyVilla = 500 * this.stayDay * (1 - this.discount/100);
                return moneyVilla;
            } else if ( this.service == "house" || this.service == "House" ) {
                let moneyHouse = 300 * this.stayDay * (1 - this.discount/100);
                return moneyHouse;
            } else if ( this.service == "room" || this.service == "Room" ) {
                let moneyRoom = 100 * this.stayDay * (1 - this.discount / 100);
                return moneyRoom;
            } else {
                return "Check type of service ? Villa or House or Room ?";
            }
        }
    }

    class Employee {
        constructor(name,idNumber,dateOfBirth,email,address,position) {
            this.name = name;
            this.idNumber = idNumber;
            this.dateOfBirth = dateOfBirth;
            this.email = email;
            this.address = address;
            this.position = position;
        }
        getName() {
            return this.name;
        }
        setName(name) {
            this.name = name;
        }
        getIDNumber() {
            return this.idNumber;
        }
        setIDNumber(idNumber) {
            this.idNumber = idNumber;
        }
        getDateOfBirth() {
            return this.dateOfBirth;
        }
        setDateOfBirth(dateOfBirth) {
            this.dateOfBirth = dateOfBirth;
        }
        getEmail() {
            return this.email;
        }
        setEmail(email) {
            this.email = email;
        }
        getAddress() {
            return this.address;
        }
        setAddress(address) {
            this.address = address;
        }
        getPosition() {
            return this.position;
        }
        setPosition(position) {
            this.position = position;
        }
        getSalary() {
            if ( this.position == "Manager" || this.position == "manager" ) {
                return 500 + "USD";
            } else if ( this.position == "Sale" || this.position == "sale" ) {
                return 300 + "USD";
            } else if ( this.position == "Marketing" || this.position == "marketing" ) {
                return 200 + "USD";
            } else {
                return "Something wrong with this employee's position";
            }
        }
    }

    let listCustomers = [];
    let arrEmployees = [];
    displayMainMenu();

    function addNewEmployee() {
        let name = prompt("Enter employee's name");
        let idNumber = prompt("Enter employee's ID number");
        let dateOfBirth = prompt("Enter employee's date of birth","dd/mm/yyyy");
        let email = prompt("Enter employee's e-mail","abc@abc.abc");
        let address = prompt("Enter employee's address");
        let position = prompt("Enter employee's job position","Manager or Sale or Marketing");
        let addEmployee = new Employee(name,idNumber,dateOfBirth,email,address,position);
        arrEmployees.push(addEmployee);
        alert("Add new employee, Done !");
        displayMainMenu();
    }
    function displayEmployeeInfor() {
        let employeeList = "";
        for ( let i = 0 ; i < arrEmployees.length ; i++ ) {
            employeeList += (i+1) + ". " +  arrEmployees[i].getName() + " - " + arrEmployees[i].getDateOfBirth() + "\n";
        }
        let choose = prompt("Enter number of employee you want to show \n" + employeeList);
        alert("Information of " + arrEmployees[choose-1].getName() + " :\n"
            + "Name : " + arrEmployees[choose-1].getName() + "\n"
            + "ID numbers : " + arrEmployees[choose-1].getIDNumber() + "\n"
            + "Date of birth : " + arrEmployees[choose-1].getDateOfBirth() + "\n"
            + "Email : " + arrEmployees[choose-1].getEmail() + "\n"
            + "Address : " + arrEmployees[choose-1].getAddress() + "\n"
            + "Job position : " + arrEmployees[choose-1].getPosition() + "\n"
            + "Salary : " + arrEmployees[choose-1].getSalary() + "\n");
        displayMainMenu();
    }
    function editEmployeeInfor() {
        let employeeList = "";
        for ( let i = 0 ; i < arrEmployees.length ; i++ ) {
            employeeList += (i+1) + ". " +  arrEmployees[i].getName() + " - " + arrEmployees[i].getDateOfBirth() + "\n";
        }
        let choose = prompt("Enter number of employee you want to edit information \n" + employeeList);
        let chooseDetail = parseInt(prompt("Enter number of detail you want to edit \n"
                                + "1. Name : " + arrEmployees[choose-1].getName() + "\n"
                                + "2. ID numbers : " + arrEmployees[choose-1].getIDNumber() + "\n"
                                + "3. Date of birth : " + arrEmployees[choose-1].getDateOfBirth() + "\n"
                                + "4. Email : " + arrEmployees[choose-1].getEmail() + "\n"
                                + "5. Address : " + arrEmployees[choose-1].getAddress() + "\n"
                                + "6. Job position : " + arrEmployees[choose-1].getPosition() + "\n"));
        switch (chooseDetail) {
            case 1:
                let newOne = prompt("Enter new employee's name");
                arrEmployees[choose-1].setName(newOne);
                alert("Done !");
                break;
            case 2:
                arrEmployees[choose-1].setIDNumber(prompt("Enter new employee's ID number"));
                alert("Done !");
                break;
            case 3:
                arrEmployees[choose-1].setDateOfBirth(prompt("Enter new employee's name"));
                alert("Done !");
                break;
            case 4:
                arrEmployees[choose-1].setEmail(prompt("Enter new employee's name"));
                alert("Done !");
                break;
            case 5:
                arrEmployees[choose-1].setAddress(prompt("Enter new employee's name"));
                alert("Done !");
                break;
            case 6:
                arrEmployees[choose-1].setPosition(prompt("Enter new employee's name"));
                alert("Done !");
                break;
        }
        displayMainMenu();
    }
    function deleteEmployee() {
        let employeeList = "";
        for ( let i = 0 ; i < arrEmployees.length ; i++ ) {
            employeeList += (i+1) + ". " +  arrEmployees[i].getName() + " - " + arrEmployees[i].getDateOfBirth() + "\n";
        }
        let choose = prompt("Enter number of employee you want to delete \n" + employeeList);
        if ( choose == "" || choose == null ) {
            alert("So, don't want to delete anybody ?");
        } else {
            let confirmDelete = confirm("Are you sure ?");
            if ( confirmDelete ) {
                arrEmployees.splice(choose-1,1);
                alert("Done !");
            } else {
                alert("So, don't want to delete anymore ?");
            }
        }
        displayMainMenu();
    }

    function addNewCustomer() {
        let name;
        let idNumber;
        let dateOfBirth;
        let email;
        let address;
        let memberCard;
        let discount;
        let follower;
        let stayDay;
        let service;
        let roomType;
        let check = false;

        //chuẩn hóa tên bên dưới
        name = prompt("Họ và tên");
        name = name.trim().toLowerCase();
        let tempName = "";
        for (let i = 0 ; i < name.length ; i++) {
            if (name.charAt(i) === " " && name.charAt(i + 1) === " ") {
                continue;
            }
            if (i === 0 || name.charAt(i - 1) === " " ) {
                tempName += name.charAt(i).toUpperCase();
                continue;
            }
            tempName += name.charAt(i);
        }
        name = tempName;

        //chuẩn hóa id number bên dưới
        do {
            idNumber = prompt("Nhập số CMND");
            if (!isNaN(idNumber)) {
                idNumber = Number.parseFloat(idNumber);
            }
            if (!Number.isInteger(idNumber)) {
                alert("Không đúng định dạng, mời nhập lại");
                continue;
            }
            if (idNumber < 10000000 || idNumber > 99999999) {
                alert("Không đúng định dạng, mời nhập lại");
                continue;
            }
            check = true;
        } while (!check);
        check = false;

        //chuẩn hóa ngày sinh bên dưới
        do {
            dateOfBirth = prompt("Nhập ngày sinh","dd/mm/yyyy");
            if ( dateOfBirth.charAt(2) == "/" && dateOfBirth.charAt(5) == "/") {
                let day = dateOfBirth.substring(0,2);
                let month = dateOfBirth.substring(3,5);
                let year = dateOfBirth.substring(6,10);
                if ( !isNaN(day) && !isNaN(month) && !isNaN(year) ) {
                    day = Number.parseFloat(day);
                    month = Number.parseFloat(month);
                    year = Number.parseFloat(year);
                    if ( Number.isInteger(day) && Number.isInteger(month) && Number.isInteger(year)) {
                        if ( day < 32 && month < 13 && year > 1950 ) {
                            check = true;
                        }
                    }
                }
            }
            if (!check) {
                alert("Ngày sinh sai định dạng, mời nhập lại");
            }
        } while (!check);
        check = false;

        //chuẩn hóa địa chỉ mail bên dưới
        do {
            let countA = 0;
            let countDot = 0;
            email = prompt("Nhập địa chỉ E-mail","vd: abc@abc.abc");
            for (let i = 0 ; i < email.length ; i++) {
                if ( email.charAt(i) == "@") {
                    countA++;
                    for (let j = i + 1; j < email.length ; j++) {
                        if (email.charAt(j) == ".") {
                            countDot++;
                        }
                    }
                }
            }
            if (countA != 1 || countDot != 1) {
                alert("email bạn nhập không đúng định dạng");
            } else {
                check = true;
            }
        } while (!check);
        check = false;

        //chuẩn hóa địa chỉ
        address = prompt("Nhập địa chỉ","Tên tỉnh/thành phố bạn đang sống");
        address = address.trim().toLowerCase();
        let tempAddress = "";
        for (let i = 0 ; i < address.length ; i++) {
            if (address.charAt(i) === " " && address.charAt(i + 1) === " ") {
                continue;
            }
            if (i === 0 || address.charAt(i - 1) === " " ) {
                tempAddress += address.charAt(i).toUpperCase();
                continue;
            }
            tempAddress += address.charAt(i);
        }
        address = tempAddress;

        memberCard = prompt("Loại thẻ thành viên","diamond,platinum,gold,silver,member");

        //chuẩn hóa giảm giá bên dưới
        do {
            discount = parseFloat(prompt("Giảm giá (%)"));
            if (!isNaN(discount)) {
                discount = Number.parseFloat(discount);
                if (Number.isInteger(discount) && (discount > 0)) {
                    check = true;
                }
            }
            if (!check) {
                alert("Phải là số nguyên dương");
            }
        } while (!check);
        check = false;

        //chuẩn hóa follower bên dưới
        do {
            follower = prompt("Số người đi kèm");
            if (!isNaN(follower)) {
                follower = Number.parseFloat(follower);
                if (Number.isInteger(follower) && (follower > 0)) {
                    check = true;
                }
            }
            if (!check) {
                alert("Phải là số nguyên dương");
            }
        } while (!check);
        check = false;

        //chuẩn hóa số ngày thuê bên dưới
        do {
            stayDay = parseInt(prompt("Số ngày thuê"));
            if (!isNaN(stayDay)) {
                stayDay = Number.parseFloat(stayDay);
                if (Number.isInteger(stayDay) && (stayDay > 0)) {
                    check = true;
                }
            }
            if (!check) {
                alert("Số ngày thuê phải là số nguyên dương");
            }
        } while (!check);
        check = false;

        service = prompt("Loại dịch vụ","villa,house,room");
        roomType = prompt("Loại phòng","vip,business,normal");

        let customer = new Customers(name,idNumber,dateOfBirth,email,address,memberCard,discount,follower,stayDay,service,roomType);
        listCustomers.push(customer);
        alert("Thêm thông tin khách hàng thành công !");
        displayMainMenu();
    }

    function displayInfoCustomer() {
        let listCus = "";
        for (let i = 0 ; i < listCustomers.length ; i++ ) {
            listCus += (i+1) + ". " + listCustomers[i].name + " - " + listCustomers[i].idNumber + "\n";
        }
        let choose = parseInt(prompt("Enter the number of customer want to show detail \n" + listCus));
        alert("Detail information : \n"
            + "Name : " + listCustomers[choose-1].name + "\n"
            + "ID number : " + listCustomers[choose-1].idNumber + "\n"
            + "Date of birth : " + listCustomers[choose-1].dateOfBirth + "\n"
            + "Address : " + listCustomers[choose-1].address + "\n"
            + "Member card : " + listCustomers[choose-1].memberCard + "\n"
            + "Discount : " + listCustomers[choose-1].discount + "\n"
            + "Follower : " + listCustomers[choose-1].follower + "\n"
            + "Stay days : " + listCustomers[choose-1].stayDay + "\n"
            + "Service : " + listCustomers[choose-1].service + "\n"
            + "Type of room : " + listCustomers[choose-1].roomType + "\n");
        displayMainMenu();
    }

    function displayTotalPay() {
        let listCus = "";
        for (let i = 0 ; i < listCustomers.length ; i++ ) {
            listCus += (i+1) + ". " + listCustomers[i].name + " - " + listCustomers[i].idNumber + "\n";
        }
        let choose = parseInt(prompt("Enter the number of customer want to show total pay \n" + listCus));
        alert(listCustomers[choose-1].name + " need to pay " + listCustomers[choose-1].payMoney() + " USD");
        displayMainMenu();
    }

    function editInforCustomer() {
        let listCus = "";
        for (let i = 0 ; i < listCustomers.length ; i++ ) {
            listCus += (i+1) + ". " + listCustomers[i].name + " - " + listCustomers[i].idNumber + "\n";
        }
        let chooseCus = parseInt(prompt("Enter the number of customer want to edit \n" + listCus));
        let chooseDetail = parseInt(prompt("Enter the number of detail want to edit \n"
                                        + "1.Name : " + listCustomers[chooseCus-1].name + "\n"
                                        + "2.ID number : " + listCustomers[chooseCus-1].idNumber + "\n"
                                        + "3.Date of birth : " + listCustomers[chooseCus-1].dateOfBirth + "\n"
                                        + "4.Address : " + listCustomers[chooseCus-1].address + "\n"
                                        + "5.Member card : " + listCustomers[chooseCus-1].memberCard + "\n"
                                        + "6.Discount : " + listCustomers[chooseCus-1].discount + "\n"
                                        + "7.Follower : " + listCustomers[chooseCus-1].follower + "\n"
                                        + "8.Stay days : " + listCustomers[chooseCus-1].stayDay + "\n"
                                        + "9.Service : " + listCustomers[chooseCus-1].service + "\n"
                                        + "10.Type of room : " + listCustomers[chooseCus-1].roomType + "\n"));
        switch (chooseDetail) {
            case 1:
                listCustomers[chooseCus-1].name = prompt("Enter new name");
                alert("Edited !");
                break;
            case 2:
                listCustomers[chooseCus-1].idNumber = parseInt(prompt("Enter new ID number"));
                alert("Edited !");
                break;
            case 3:
                listCustomers[chooseCus-1].dateOfBirth = prompt("Enter new date","dd/mm/yyyy");
                alert("Edited !");
                break;
            case 4:
                listCustomers[chooseCus-1].address = prompt("Enter new address");
                alert("Edited !");
                break;
            case 5:
                listCustomers[chooseCus-1].memberCard = prompt("Enter new member card","diamond,platinum,gold,silver,member");
                alert("Edited !");
                break;
            case 6:
                listCustomers[chooseCus-1].discount = prompt("Enter new discount (%)");
                alert("Edited !");
                break;
            case 7:
                listCustomers[chooseCus-1].follower = parseInt(prompt("Enter new number of follower"));
                alert("Edited !");
                break;
            case 8:
                listCustomers[chooseCus-1].stayDay = parseInt(prompt("Enter new number of days you will stay"));
                alert("Edited !");
                break;
            case 9:
                listCustomers[chooseCus-1].service = prompt("Enter new service","villa,house,room");
                alert("Edited !");
                break;
            case 10:
                listCustomers[chooseCus-1].roomType = prompt("Enter new type of room","vip,business,normal");
                alert("Edited !");
                break;
        }
        displayMainMenu();
    }

    function deleteCustomer() {
        let listCus = "";
        for (let i = 0 ; i < listCustomers.length ; i++ ) {
            listCus += (i+1) + ". " + listCustomers[i].name + " - " + listCustomers[i].idNumber + "\n";
        }
        let chooseDelete = prompt("Enter the number of customer want to delete \n" + listCus);
        if ( chooseDelete == "" || chooseDelete == null ) {
            alert("So, you don't want to delete anybody ?");
        } else {
            let confirmDelete = confirm("Do you really want to delete " + listCustomers[chooseDelete-1].name + " ?");
            if (confirmDelete) {
                listCustomers.splice((chooseDelete-1),1);
            } else {
                alert("So, now you don't want to delete anymore ?");
            }
        }
        displayMainMenu();
    }

    function displayMainMenu() {
        let mainMenu = parseInt(prompt("Enter the number of the action you want : \n"
            + "1. Add New Customer. \n"
            + "2. Display Customer's Information. \n"
            + "3. Display total pay of customer. \n"
            + "4. Edit Customer's Information . \n"
            + "5. Delete Customer.\n"
            + "6. Add New Employee. \n"
            + "7. Display Employee's Information. \n"
            + "8. Edit Employee's Information . \n"
            + "9. Delete Employee.\n"
            + "10. Exit."));
        switch (mainMenu) {
            case 1:
                addNewCustomer();
                break;
            case 2:
                displayInfoCustomer();
                break;
            case 3:
                displayTotalPay();
                break;
            case 4:
                editInforCustomer();
                break;
            case 5:
                deleteCustomer();
                break;
            case 6:
                addNewEmployee();
                break;
            case 7:
                displayEmployeeInfor();
                break;
            case 8:
                editEmployeeInfor();
                break;
            case 9:
                deleteEmployee();
                break;
            case 10:
                break;
        }

    }



</script>

</body>
</html>